!function(){"use strict";function e(e){return(e||"").toLowerCase().includes("localhost")||"127.0.0.1"===e||e.startsWith("127.")||"::1"===e||e.endsWith(".local")||e.endsWith(".localhost")}function t(e,t){try{return e.getItem(t)}catch{return null}}function n(e,t,n){try{e.setItem(t,n)}catch{}}function r(e){var t=Date.now().toString(16),n=Math.floor(4294967295*Math.random()).toString(16).padStart(8,"0");return(e||"")+t+n}var o=document.currentScript;o instanceof HTMLScriptElement||(o=document.querySelector("script[data-site-id]"));if(!(o instanceof HTMLScriptElement))return;var a=o.getAttribute("data-site-id"),i=o.getAttribute("data-api-url");if(!a||!i)return;if("file:"===location.protocol||e(location.hostname))return;var c="tempoo_visitor_id",u="tempoo_session_id";function l(){var e=t(localStorage,c)||t(sessionStorage,c);return e||(e=r("v-"),n(localStorage,c,e)),e}function s(){var e=t(sessionStorage,u);return e||(e=r("s-"),n(sessionStorage,u,e)),e}function d(){return{siteId:a,type:"pageview",url:location.href,referrer:document.referrer||null,viewport:{width:innerWidth||0,height:innerHeight||0},visitorId:l(),sessionId:s(),userId:null,eventName:null,data:null,timestamp:(new Date).toISOString()}}function f(e){try{var t=JSON.stringify(e);if(navigator.sendBeacon){var r=new Blob([t],{type:"application/json"});navigator.sendBeacon(i,r)||fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:t,keepalive:!0})}else fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:t,keepalive:!0})}catch{}}function v(){var e=d();e.type="pageview",f(e)}function m(e,t){if(e){var n=d();n.type="custom",n.eventName=e,t&&"object"==typeof t&&(n.data=t),f(n)}}function p(e,t){if(e){var n=d();n.type="identify",n.userId=e,n.data="object"==typeof t?t:null,f(n)}}function g(e,t){var n=d();n.type="payment",n.eventName=e||null,n.data="object"==typeof t?t:null,f(n)}function h(){var e=document.documentElement,t=document.body,n=Math.max(e.scrollHeight,t.scrollHeight,e.offsetHeight,t.offsetHeight,e.clientHeight,t.clientHeight),r=innerHeight||0,o=pageYOffset||e.scrollTop||0,a=n-r;return a<=0?100:Math.min(100,Math.round(o/a*100))}function y(e,t){var n=e.getAttribute("data-tempoo-scroll");if(n){var r=parseFloat(e.getAttribute("data-tempoo-scroll-threshold")||"0.5"),o=parseInt(e.getAttribute("data-tempoo-scroll-delay")||"0",10),a=function(){var o=h(),a={scroll_percentage:o,threshold:r,delay:o};Array.from(e.attributes).forEach(function(t){if(t.name.startsWith("data-tempoo-scroll-")&&"data-tempoo-scroll-threshold"!==t.name&&"data-tempoo-scroll-delay"!==t.name){var n=t.name.replace("data-tempoo-scroll-","");a[n.replace(/-/g,"_")]=t.value}}),m(n,a),t.unobserve(e)};o>0?setTimeout(a,o):a()}}function w(){if("IntersectionObserver"in window){var e=document.querySelectorAll("[data-tempoo-scroll]");if(e.length){var t=new Map;e.forEach(function(e){var n=parseFloat(e.getAttribute("data-tempoo-scroll-threshold")||"0.5");t.has(n)||t.set(n,[]),t.get(n).push(e)}),t.forEach(function(e,t){var n=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&y(e.target,n)})},{threshold:t});e.forEach(function(e){n.observe(e)})})}}}function b(e){if(e&&e.href)try{var t=new URL(e.href);if("http:"!==t.protocol&&"https:"!==t.protocol)return;if(t.hostname===location.hostname)return;m("external_link",{url:t.href,text:(e.textContent||"").trim()})}catch{}}v(),document.addEventListener("click",function(e){var t=e.target.closest("[data-tempoo-goal]");if(t){var n=t.getAttribute("data-tempoo-goal");if(n){var r={};Array.from(t.attributes).forEach(function(e){if(e.name.startsWith("data-tempoo-goal-")){var t=e.name.replace("data-tempoo-goal-","");r[t.replace(/-/g,"_")]=e.value}}),m(n,r)}}var o=e.target.closest("a");o&&b(o)}),document.addEventListener("keydown",function(e){if("Enter"===e.key||" "===e.key){var t=e.target.closest("[data-tempoo-goal]");if(t){var n=t.getAttribute("data-tempoo-goal");if(n){var r={};Array.from(t.attributes).forEach(function(e){if(e.name.startsWith("data-tempoo-goal-")){var t=e.name.replace("data-tempoo-goal-","");r[t.replace(/-/g,"_")]=e.value}}),m(n,r)}}}}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",w):w(),window.tempooAnalytics={track:m,identify:p,payment:g,pageview:v}}();